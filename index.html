<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prudent Consultant Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo"><i class="fa-solid fa-layer-group"></i></div>
                <span>Prudent</span>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-btn active" onclick="switchTab('bulk', this)">
                    <i class="fa-solid fa-layer-group"></i> Bulk Operations
                </button>
                <button class="nav-btn" onclick="switchTab('curl', this)">
                    <i class="fa-solid fa-terminal"></i> Command Generator
                </button>
            </nav>

            <div class="sidebar-footer">
                <p>Internal Use Only</p>
                <p style="opacity: 0.5;">v4.3.3 (Stable)</p>
            </div>
        </aside>

        <main class="content-area">
            
            <section id="view-bulk" class="view-section active">
                
                <div class="header-pill">
                    <div class="pill-icon"><i class="fa-solid fa-cubes-stacked"></i></div>
                    <div>
                        <h1>Bulk Operations</h1>
                        <p>Generate configuration manifests from CSV/Excel data</p>
                    </div>
                </div>

                <div class="dashboard-grid bulk-grid">
                    <div class="card settings-card">
                        <div class="card-title"><i class="fa-solid fa-sliders"></i> Operation Settings</div>
                        <form id="bulk-config-form">
                            
                            <div class="input-group">
                                <label>Operation Type</label>
                                <div class="select-wrapper">
                                    <select id="b-operation-type" onchange="updateTemplateLink()">
                                        <optgroup label="Core Resources">
                                            <option value="indexes" selected>Indexes</option>
                                            <option value="hec_tokens">HEC Tokens</option>
                                        </optgroup>
                                        <optgroup label="Apps & Add-ons">
                                            <option value="splunkbase">Splunkbase Apps</option>
                                            <option value="private_apps">Private Apps</option>
                                        </optgroup>
                                        <optgroup label="Network & Security">
                                            <option value="ip_allowlist">IP Allowlist</option>
                                            <option value="outbound_ports">Outbound Ports</option>
                                        </optgroup>
                                        <optgroup label="System">
                                            <option value="maintenance_windows">Maintenance Windows</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>

                            <div id="op-description" style="margin-bottom: 20px; font-size: 0.85rem; color: var(--text-muted); line-height: 1.5;">
                                Generate <code>indexes.conf</code> stanzas. Upload a CSV/Excel with: Index Name, Datatype, Retention, etc.
                            </div>

                            <div id="index-advanced-wrapper">
                                <button type="button" id="btn-advanced-toggle" class="advanced-toggle">
                                    Index Properties <i class="fa-solid fa-chevron-down"></i>
                                </button>

                                <div id="advanced-options" class="advanced-section hidden">
                                    <div class="input-group"><label>Self Storage Bucket Path</label><input type="text" id="b-bucket" placeholder="your-bucket-path/"></div>
                                    <div class="divider-text">Path Overrides</div>
                                    <div class="input-group"><label>Home Path</label><input type="text" id="b-homePath" placeholder="$SPLUNK_DB/$_index_name/db"></div>
                                    <div class="input-group"><label>Cold Path</label><input type="text" id="b-coldPath" placeholder="$SPLUNK_DB/$_index_name/colddb"></div>
                                    <div class="input-group"><label>Thawed Path</label><input type="text" id="b-thawedPath" placeholder="$SPLUNK_DB/$_index_name/thaweddb"></div>
                                </div>
                            </div>

                        </form>
                    </div>

                    <div class="card upload-card">
                        <div class="card-title"><i class="fa-solid fa-bolt"></i> Upload & Generate</div>
                        
                        <div id="drop-zone" class="drop-zone">
                            <div class="cloud-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                            <h3>Drag & Drop Files</h3>
                            <p>or click to select CSV / Excel</p>
                            
                            <div class="sample-link-wrapper">
                                <span style="opacity: 0.6; font-size: 0.8rem; margin-right: 5px;">Need a template?</span>
                                <a href="#" id="btn-download-csv" class="sample-link"><i class="fa-solid fa-file-csv"></i> CSV</a>
                                <span style="opacity: 0.3; margin: 0 5px;">|</span>
                                <a href="#" id="btn-download-xlsx" class="sample-link"><i class="fa-solid fa-file-excel"></i> Excel</a>
                            </div>

                            <input type="file" id="file-input" accept=".xlsx, .xls, .csv" multiple style="display:none;">
                        </div>

                        <div id="file-list-container" class="file-list-container hidden"></div>

                        <button id="process-btn" class="primary-btn big-btn">
                            Generate JSON <i class="fa-solid fa-arrow-right"></i>
                        </button>

                        <div class="export-section">
                            <label>Export Filename</label>
                            <div class="filename-input-wrapper">
                                <input type="text" id="export-filename" placeholder="output_filename">
                                <span class="extension">.json</span>
                            </div>
                        </div>

                        <div class="action-row">
                            <button id="btn-copy-json" class="action-btn btn-copy"><i class="fa-regular fa-copy"></i> Copy JSON</button>
                            <button id="btn-download-json" class="action-btn btn-download"><i class="fa-solid fa-download"></i> Download</button>
                        </div>

                        <div id="bulk-result" class="result-box hidden">
                            <div class="code-window">
                                <div class="code-header">Generated Output</div>
                                <pre id="bulk-output" class="code-block"></pre>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <section id="view-curl" class="view-section">
                <div class="header-pill">
                    <div class="pill-icon"><i class="fa-solid fa-terminal"></i></div>
                    <div>
                        <h1>Command Generator</h1>
                        <p>Construct ACS & REST API requests</p>
                    </div>
                </div>

                <div class="card curl-card">
                    <div class="card-title"><i class="fa-solid fa-sliders"></i> Configuration</div>
                    <div class="horizontal-row">
                        <div class="input-group">
                            <label>Method</label>
                            <select id="c-method">
                                <option value="GET">GET</option>
                                <option value="POST">POST</option>
                                <option value="DELETE">DELETE</option>
                                <option value="PUT">PUT</option>
                            </select>
                        </div>
                        <div class="input-group" style="flex: 2;">
                            <label>Base URL</label>
                            <input type="text" id="c-url" value="https://" placeholder="https://splunk-instance">
                            <div class="checkbox-wrapper" style="margin-top: 8px;">
                                <input type="checkbox" id="c-includePort" checked>
                                <label for="c-includePort" style="font-size:0.8rem; font-weight:500; color:var(--text-light); cursor:pointer;">Append Port 8089</label>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Auth Type</label>
                            <select id="c-auth" onchange="toggleAuth()">
                                <option value="none" selected>None</option>
                                <option value="basic">Basic</option>
                                <option value="token">Bearer Token</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="auth-basic" class="auth-row hidden">
                        <div class="input-group"><label>Username</label><input type="text" id="c-user" placeholder="Enter your username"></div>
                        <div class="input-group"><label>Password</label><input type="password" id="c-pass" placeholder="Please enter password"></div>
                    </div>
                    <div id="auth-token" class="auth-row hidden">
                        <div class="input-group full"><label>Bearer Token String</label><input type="text" id="c-token" placeholder="Enter your token value"></div>
                    </div>
                    
                    <div class="input-group" style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: baseline;">
                            <label>Target Endpoint</label>
                            <a href="https://docs.splunk.com/Documentation/Splunk/10.0.1/RESTREF/RESTprolog" target="_blank" style="font-size: 0.75rem; color: var(--primary); text-decoration: none;">View API Reference (10.0.1) <i class="fa-solid fa-external-link-alt"></i></a>
                        </div>
                        
                        <select id="c-endpoint">
                            <optgroup label="ACS: Network & Security">
                                <option value="access/outbound-ports" data-path="adminconfig/v2">access/outbound-ports (Configure Outbound Ports)</option>
                                <option value="access/search-api/ipallowlists" data-path="adminconfig/v2">access/{feature}/ipallowlists (IP Allow Lists)</option>
                                <option value="private-connectivity/endpoints" data-path="adminconfig/v2">private-connectivity (Private Connectivity)</option>
                                <option value="inputs/http-event-collectors" data-path="adminconfig/v2">inputs/http-event-collectors (HEC Tokens)</option>
                                <option value="tokens" data-path="adminconfig/v2">tokens (Auth Tokens)</option>
                                <option value="emek/key" data-path="adminconfig/v2">emek/key (Encryption Keys)</option>
                                <option value="observability/sso-pairing" data-path="adminconfig/v2">observability/sso-pairing (Unified Identity)</option>
                            </optgroup>

                            <optgroup label="ACS: Apps & Content">
                                <option value="apps/victoria" data-path="adminconfig/v2">apps/victoria (Manage Apps)</option>
                                <option value="permissions/apps" data-path="adminconfig/v2">permissions/apps (App Permissions)</option>
                                <option value="apps/victoria/download/{app_id}" data-path="adminconfig/v2">apps/download (Export Apps)</option>
                            </optgroup>

                            <optgroup label="ACS: Data & Storage">
                                <option value="indexes" data-path="adminconfig/v2">indexes (Manage Indexes)</option>
                                <option value="cloud-resources/self-storage-locations/buckets" data-path="adminconfig/v2">self-storage-locations (DDSS)</option>
                            </optgroup>

                            <optgroup label="ACS: System Administration">
                                <option value="limits" data-path="adminconfig/v2">limits (Limits.conf)</option>
                                <option value="maintenance-windows/schedules" data-path="adminconfig/v2">maintenance-windows/schedules</option>
                                <option value="maintenance-windows/preferences" data-path="adminconfig/v2">maintenance-windows/preferences (Change Freeze)</option>
                                <option value="restart-now" data-path="adminconfig/v2">restart-now (Manage Restarts)</option>
                                <option value="deployment/retry" data-path="adminconfig/v2">deployment/retry (Retry Failed Ops)</option>
                                <option value="python-runtime" data-path="adminconfig/v2">python-runtime</option>
                            </optgroup>

                            <optgroup label="REST: Knowledge Objects">
                                <option value="datamodel/model" data-path="services">datamodel/model</option>
                                <option value="saved/searches" data-path="services">saved/searches (Reports/Alerts)</option>
                                <option value="configs/conf-macros" data-path="services">configs/conf-macros</option>
                                <option value="search/tags" data-path="services">search/tags</option>
                            </optgroup>

                            <optgroup label="REST: System">
                                <option value="server/info" data-path="services">server/info</option>
                                <option value="authentication/users" data-path="services">authentication/users (Manage Users)</option>
                                <option value="authorization/roles" data-path="services">authorization/roles (Manage Roles)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <button class="primary-btn big-btn" onclick="generateCurl()">Generate Command <i class="fa-solid fa-code"></i></button>
                    <div id="curl-result" class="result-box hidden">
                        <div class="card-title" style="margin-top:20px;"><i class="fa-solid fa-terminal"></i> Result</div>
                        <div class="code-window">
                            <div class="code-header">BASH / CURL <button class="copy-tiny" onclick="copyText('curl-output')">Copy</button></div>
                            <pre id="curl-output" class="code-block"></pre>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div id="toast" class="toast">Copied!</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
